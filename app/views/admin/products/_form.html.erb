<%= simple_form_for ([:admin,@product]), :html => { :multipart => true, :class => 'form-horizontal'} do |f| %>
  <%= f.input :product %>
  <%= f.input :product_type %>
  <%= f.input :price %>
  <%= f.fields_for :images do |img|  %>
  	<% if img.object.new_record? %>
  	  <%= render 'image_form', :f => img %>
  	<% end %>
  <%end%>
  <div class='control-group'>
    <div class='controls'>
      <%= link_to_add_images 'Add More Images', f, :images %>
    </div>
  </div>
  <div class='control-group'>
    <div class='controls'>
      <% @product.images.each do |img| %>
        <% if img.persisted? %>
          <div class='product_image'  id="<%= img.id %>">
            <%= link_to (image_tag('delete.png')),admin_image_path(img), method: :delete, :data => { :confirm => 'Delete this image ?' }, :class=> 'pull-right'%>
            <%= image_tag(img.image.url(:thumb), :class => 'img-polaroid') %>
          </div>
        <% end %>
      <% end %> 
    </div>
  </div>
  <%= f.association :brand, :label_method => :brand, :as => :radio_buttons %>
  <%= f.association :categories, :label_method => :category, :as => :check_boxes %>
  <%#= f.association :product_attributes, :label_method => :product_attributes, :as => :select %>

  <div>
    <%= link_to_add_attributes 'Add Attribute', f, :product_attributes %>
  </div>
  <table class='table table-striped'>
    <tr>
      <td><b>Attributes</b></td>
      <td><b>Details</b></td>
      <td class= 'shift_right'><b>Action</b></td>
    </tr>
    <% @product.product_details.each do |pro_detail| %>
    <tr>
      <td><%= pro_detail.product_attribute.product_attributes %></td>
      <td><%= pro_detail.details %></td>
      <td class ='shift_right'><%= link_to 'delete', admin_product_detail_path(pro_detail), method: :delete, :data => { :confirm => 'Delete attribute ?' } %></td>
    </tr>
    <% end %>
  </table>
  
  <%= f.submit :class => "btn btn-success"%>
  <%= link_to 'back', request.referrer, :class => 'btn btn-inverse'  %>
<% end %> 

